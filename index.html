<!doctype html>
<html>
<head>
<style>
body {
  margin: 0;
}
canvas {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.buttons {
  display: flex;
  position: absolute;
  right: 30px;
  bottom: 30px;
}
</style>
</head>
<body>
<canvas id=canvas></canvas>
<div class=buttons>
  <input type=button id=enter-vr-button value="Enter XR">
</div>
<script type=module>
import * as THREE from 'https://raw.githack.com/mrdoob/three.js/dev/build/three.module.js';
import 'https://rawcdn.githack.com/exokitxr/webpackage/655f2378d91a0496b09b1ce1a820d3fc6243cdc2/dist/wbn.js';
import {RealityScriptEngine, RealityScript} from './reality-script.js';

(async () => {
const res = await fetch('cube.html');
const cubeHtml = await res.text();

const b = RealityScript.compile(
  'https://realityscript.com/',
  'https://realityscript.com/manifest.json',
  [
    {
      url: 'https://realityscript.com/',
      type: 'text/html',
      data: cubeHtml,
    }
  ]
);
const rs = new RealityScript(b);

const rse = new RealityScriptEngine();
rse.add(rs);
document.body.appendChild(rse.domElement);

function animate() {
  window.requestAnimationFrame(animate);
  rse.tick();
}
window.requestAnimationFrame(animate);
})();
</script>
</body>
</html>